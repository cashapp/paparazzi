import com.android.build.api.instrumentation.InstrumentationScope
import org.jetbrains.kotlin.gradle.dsl.JvmTarget
import app.cash.paparazzi.gradle.instrumentation.ResourcesCompatVisitorFactory

plugins {
  id 'com.android.kotlin.multiplatform.library'
  id 'org.jetbrains.kotlin.multiplatform'
  id 'app.cash.paparazzi'
}

kotlin {
  androidLibrary {
    namespace = 'app.cash.paparazzi.plugin.test'
    compileSdk = libs.versions.compileSdk.get() as int
    minSdk = libs.versions.minSdk.get() as int

    withJava()
    withHostTest {
    }

    compilerOptions {
      jvmTarget.set(JvmTarget.fromTarget(libs.versions.javaTarget.get()))
    }
  }
}
//
//androidComponents {
//    onVariants(selector().all()) {
//      instrumentation.transformClassesWith(ResourcesCompatVisitorFactory.class, InstrumentationScope.ALL) { params ->
//      }
//  }
//}
